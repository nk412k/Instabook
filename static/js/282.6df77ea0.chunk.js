"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[282],{282:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(8214),s=t(5861),o=t(885),i=t(3999),a=t(3373),c=t(2921),l=t(2791),d=t(184),u=function(e){var n=(0,l.useRef)(),t=e.center,r=e.zoom;return(0,l.useEffect)((function(){new window.ol.Map({target:n.current.id,layers:[new window.ol.layer.Tile({source:new window.ol.source.OSM})],view:new window.ol.View({center:window.ol.proj.fromLonLat([t.lng,t.lat]),zoom:r})})}),[t,r]),(0,d.jsx)("div",{ref:n,className:"map ".concat(e.className),style:e.style,id:"map"})},p=t(1797),h=t(9508),m=t(5434),f=t(9895),x=function(e){var n=(0,l.useState)(!1),t=(0,o.Z)(n,2),x=t[0],j=t[1],w=(0,l.useState)(!1),v=(0,o.Z)(w,2),Z=v[0],k=v[1],g=function(){return j(!1)},C=(0,h.x)(),_=C.isLoading,N=C.error,b=C.sendRequest,y=C.errorHandler,D=(0,l.useContext)(p.V),E=function(){return k(!1)},L=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,k(!1),n.next=4,b("https://instabook-web.herokuapp.com/api/posts/"+e.id,"DELETE",null,{Authorization:"Bearer "+D.token});case 4:e.onDelete(e.id),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(m.Z,{error:N,onClear:y}),(0,d.jsx)(c.Z,{show:x,header:e.address,onCancel:g,contentClass:"post-item__modal-content",footerClass:"post-item__modal-actions",footer:(0,d.jsx)(i.Z,{onClick:g,children:"CLOSE"}),children:(0,d.jsx)("div",{className:"map-container",children:(0,d.jsx)(u,{center:e.coordinates,zoom:17})})}),(0,d.jsx)(c.Z,{show:Z,header:"Are you sure?",onCancel:E,footerClass:"post-item__modal-actions",footer:(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(i.Z,{inverse:!0,onClick:E,children:"Cancel"}),(0,d.jsx)(i.Z,{danger:!0,onClick:L,children:"Delete"})]}),children:(0,d.jsx)("p",{children:"Are you sure you want to proceed and delete the post? Later it cannot be undone"})}),(0,d.jsx)("li",{className:"post-item",children:(0,d.jsxs)(a.Z,{className:".post-item__content",children:[_&&(0,d.jsx)(f.Z,{asOverlay:!0}),(0,d.jsx)("div",{className:"post-item__image",children:(0,d.jsx)("img",{src:"https://instabook-web.herokuapp.com"+"/".concat(e.image),alt:e.title})}),(0,d.jsxs)("div",{className:"post-item__info",children:[(0,d.jsx)("h2",{children:e.title}),(0,d.jsx)("h3",{children:e.address}),(0,d.jsx)("p",{children:e.description})]}),(0,d.jsxs)("div",{className:"post-item__actions",children:[(0,d.jsx)(i.Z,{inverse:!0,onClick:function(){return j(!0)},children:"View on Map"}),D.userId===e.creator&&(0,d.jsx)(i.Z,{to:"/posts/".concat(e.id),children:"Edit"}),D.userId===e.creator&&(0,d.jsx)(i.Z,{danger:!0,onClick:function(){return k(!0)},children:"Delete"})]})]})})]})},j=function(e){return 0===e.items.length?(0,d.jsx)("div",{className:"post-list center",children:(0,d.jsxs)(a.Z,{children:[(0,d.jsx)("h2",{children:"No Post Found"}),(0,d.jsx)(i.Z,{to:"/posts/new",children:"Share Post"})]})}):(0,d.jsx)("ul",{className:"post-list",children:e.items.map((function(n){return(0,d.jsx)(x,{title:n.title,id:n.id,image:n.imageUrl,description:n.description,address:n.address,coordinates:n.location,creator:n.creator,onDelete:e.onDeletePost},n.id)}))})},w=t(8931),v=function(){var e=(0,w.UO)().userId,n=(0,l.useState)([]),t=(0,o.Z)(n,2),i=t[0],a=t[1],c=(0,h.x)(),u=c.isLoading,p=c.error,x=c.sendRequest,v=c.errorHandler;(0,l.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x("https://instabook-web.herokuapp.com/api/posts/user/"+e);case 3:t=n.sent,a(t.posts),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[x,e]);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(m.Z,{error:p,onClear:v}),u&&(0,d.jsx)(f.Z,{asOverlay:!0,className:"center"}),!u&&i&&(0,d.jsx)(j,{items:i,onDeletePost:function(e){a((function(n){return n.filter((function(n){return n.id!==e}))}))}})]})}}}]);
//# sourceMappingURL=282.6df77ea0.chunk.js.map